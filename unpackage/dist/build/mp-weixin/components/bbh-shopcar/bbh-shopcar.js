(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/bbh-shopcar/bbh-shopcar"],{"0f47":function(t,i,n){"use strict";var e=n("d6ec"),s=n.n(e);s.a},"21ff":function(t,i,n){"use strict";n.d(i,"b",(function(){return s})),n.d(i,"c",(function(){return a})),n.d(i,"a",(function(){return e}));var e={uniSwipeAction:function(){return n.e("components/uni-swipe-action/uni-swipe-action").then(n.bind(null,"342c"))},uniSwipeActionItem:function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-swipe-action-item/uni-swipe-action-item")]).then(n.bind(null,"2962"))}},s=function(){var t=this,i=t.$createElement;t._self._c},a=[]},2998:function(t,i,n){"use strict";n.r(i);var e=n("21ff"),s=n("4a95");for(var a in s)"default"!==a&&function(t){n.d(i,t,(function(){return s[t]}))}(a);n("0f47");var r,o=n("f0c5"),u=Object(o["a"])(s["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],r);i["default"]=u.exports},"4a95":function(t,i,n){"use strict";n.r(i);var e=n("c916"),s=n.n(e);for(var a in e)"default"!==a&&function(t){n.d(i,t,(function(){return e[t]}))}(a);i["default"]=s.a},c916:function(t,i,n){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=s(n("a34a"));function s(t){return t&&t.__esModule?t:{default:t}}function a(t,i,n,e,s,a,r){try{var o=t[a](r),u=o.value}catch(c){return void n(c)}o.done?i(u):Promise.resolve(u).then(e,s)}function r(t){return function(){var i=this,n=arguments;return new Promise((function(e,s){var r=t.apply(i,n);function o(t){a(r,e,s,o,u,"next",t)}function u(t){a(r,e,s,o,u,"throw",t)}o(void 0)}))}}var o={props:{list:Array},data:function(){return{check:0,flag:!1,money:0,num:0,time:0,half:.5}},methods:{swipeClick:function(t,i){this.removeM(t.content.id)},all:function(t){if(this.flag=!this.flag,this.flag){for(var i=0;i<this.list.length;i++)this.list[i].options[0].check=!0;this.num=this.list.length,this.total()}else{for(i=0;i<this.list.length;i++)this.list[i].options[0].check=!1;this.num=0,this.money=0,this.time=0}this.$emit("refreshShopCar",this.list)},signCount:function(t){var i=this;return r(e.default.mark((function n(){var s,a,r;return e.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:s=0;case 1:if(!(s<i.list.length)){n.next=14;break}if(a=i.list[s].options[0],a.id!=t){n.next=11;break}if(!(a.quantity>1)){n.next=10;break}return a.quantity--,r={id:a.id,quantity:a.quantity},n.next=9,i.$u.api.getQuantity(r);case 9:i.$emit("refreshShopCar",i.list);case 10:return n.abrupt("break",14);case 11:s++,n.next=1;break;case 14:i.total();case 15:case"end":return n.stop()}}),n)})))()},addCount:function(i){var n=this;return r(e.default.mark((function s(){var a,r,o;return e.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<n.list.length)){e.next=17;break}if(r=n.list[a].options[0],r.id!=i){e.next=14;break}if(!(r.quantity<5)){e.next=12;break}return r.quantity++,o={id:r.id,quantity:r.quantity},e.next=9,n.$u.api.getQuantity(o);case 9:n.$emit("refreshShopCar",n.list),e.next=13;break;case 12:t.showToast({title:"请适量锻炼!"});case 13:return e.abrupt("break",17);case 14:a++,e.next=1;break;case 17:n.total();case 18:case"end":return e.stop()}}),s)})))()},inp:function(t){for(var i=0;i<this.list.length;i++){var n=this.list[i].options[0];n.id==t&&(n.check=!n.check,0==n.check?(this.flag=!1,this.num-=1,this.money-=n.calorie*n.quantity,this.time-=n.quantity*this.half):(this.num+=1,this.money+=n.calorie*n.quantity,this.time+=n.quantity*this.half,this.num==this.list.length&&(this.flag=!0)))}this.$emit("refreshShopCar",this.list)},removeM:function(i){for(var n=this,s=0;s<this.list.length;s++){var a=this.list[s].options[0];if(a.id==i){t.showModal({title:"",content:"确定删除吗",confirmText:"确定",success:function(){var t=r(e.default.mark((function t(i){var r;return e.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={id:a.id},t.next=3,n.$u.api.deletePlan(r);case 3:i.confirm&&(n.list.splice(s,1),n.$emit("refreshShopCar",n.list),a.check&&(n.num--,n.total()),0==n.num?n.flag=!1:n.num==n.list.length&&(n.flag=!0));case 4:case"end":return t.stop()}}),t)})));function i(i){return t.apply(this,arguments)}return i}()});break}}},total:function(){this.money=0,this.time=0;for(var t=0;t<this.list.length;t++)1==this.list[t].options[0].check&&(this.money+=this.list[t].options[0].calorie*this.list[t].options[0].quantity,this.time+=this.list[t].options[0].quantity*this.half)},goPay:function(){var i=this.list.filter((function(t){return!0===t.options[0].check}));0!=i.length?this.$u.route({url:"pages/waiting_for_restaurant_order/waiting_for_restaurant_order",params:{list:JSON.stringify(i),totalCalorie:this.money,totalTime:this.time}}):t.showToast({title:"您还没有选中要结算的商品",icon:"none"})}}};i.default=o}).call(this,n("543d")["default"])},d6ec:function(t,i,n){}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/bbh-shopcar/bbh-shopcar-create-component',
    {
        'components/bbh-shopcar/bbh-shopcar-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("2998"))
        })
    },
    [['components/bbh-shopcar/bbh-shopcar-create-component']]
]);
